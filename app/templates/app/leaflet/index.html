{% extends 'base.html' %}
{% load static %}

{% block style %}
<!-- leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
     integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
     crossorigin=""/>
 
<!-- Leaflet.Locate -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.79.0/dist/L.Control.Locate.min.css" />
<style>
  #map { height: 500px; }
</style>
{% endblock %}

{% block content %}
<div class="container mt-3">
  
  <div id="map"></div>

  <ul class="mt-3">
    <li>
      <a href="https://leafletjs.com" target="_blank">
        https://leafletjs.com
      </a>
    </li>
    <li>
      <a href="https://github.com/domoritz/leaflet-locatecontrol" target="_blank">
        https://github.com/domoritz/leaflet-locatecontrol
      </a>
    </li>
    <li>
      <a href="https://uedayou.net/jrslod/" target="_blank">
        https://uedayou.net/jrslod/
      </a>
    </li>
  </ul>
</div>
{% endblock %}

{% block script %}
<!-- Leaflet -->
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
<!-- Leaflet.Locate -->
<script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.79.0/dist/L.Control.Locate.min.js" charset="utf-8"></script>
<script>
  var map = L.map('map').setView([36, 137.59], 5);
  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
  }).addTo(map);
  L.control.locate().addTo(map);
  fetch('{% static "app/geojson/東日本旅客鉄道.geojson" %}')
    .then((response) => response.json())
    .then((data) => {
      L.geoJson(data).addTo(map);
    });
</script>
{% endblock %}